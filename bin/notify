#!/bin/sh
# notify
# Created: Thu Aug 14 12:38:41 +08 2025
set -e

me=$(basename $0)

usage() {
	echo "usage: $me [-h] <notice message>
  Options:
    -d
	Do not show dismiss button
    -h
	Help"
}

opt_show_dismiss_button=yes
while getopts dh opt
do
	case "$opt" in
		d) opt_show_dismiss_button=;;
		h) usage; exit ;;
		\?) echo Unknown option ; exit;;
	esac
done
shift $(($OPTIND -1))

if [ -z "$1" ]; then
	usage
	exit 1
fi

if [ -n "$opt_show_dismiss_button" ]; then
	osascript -e 'display dialog "'"$*"'" with title "Notice" buttons {"Dismiss"} default button "Dismiss"'
else
	osascript -e "display notification \"$*\" with title \"notice\" sound name \"Glass\""
fi
