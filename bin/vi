#!/usr/bin/env perl
use strict;
use warnings;
use File::Basename;
# vi
# Created: Tue Mar 25 11:15:04 SGT 2014
my $bin = basename($0);
if ($bin eq 'vi') {
  $bin = 'vim';
}
my $realvi = '/usr/local/bin/' . $bin;
sub run_vi_normally {
  undef $ENV{LD_LIBRARY_PATH};
  system("$realvi", @ARGV);
}

if (@ARGV == 1) {
  if ($ARGV[0] =~ /:\d+:?/) {
    my $arg = $ARGV[0];
    $arg =~ s/:/ +/;
    $arg =~ s/:.*//;
    system("$realvi $arg");
  } else {
    run_vi_normally();
  }
} else {
  run_vi_normally();
}
